<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>English Proficiency Test - CBT Platform</title>
  <style>
    :root {
      --primary-color: #4361ee;
      --secondary-color: #3a0ca3;
      --accent-color: #4cc9f0;
      --light-color: #f8f9fa;
      --dark-color: #212529;
      --success-color: #4bb543;
      --warning-color: #ffcc00;
      --danger-color: #dc3545;
      --transition: all 0.3s ease;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    body {
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      min-height: 100vh;
      padding: 20px;
      color: var(--dark-color);
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      background-color: white;
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      animation: fadeIn 0.8s ease;
    }
    
    header {
      background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
      color: white;
      padding: 20px 30px;
      text-align: center;
    }
    
    header h1 {
      font-size: 28px;
      margin-bottom: 5px;
    }
    
    header p {
      opacity: 0.9;
    }
    
    .content {
      padding: 30px;
    }
    
    .welcome-screen {
      text-align: center;
      animation: slideUp 0.6s ease;
    }
    
    .welcome-screen h2 {
      color: var(--secondary-color);
      margin-bottom: 15px;
    }
    
    .welcome-screen p {
      margin-bottom: 25px;
      line-height: 1.6;
      color: #555;
    }
    
    .form-group {
      margin-bottom: 20px;
      text-align: left;
      max-width: 400px;
      margin-left: auto;
      margin-right: auto;
    }
    
    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: var(--dark-color);
    }
    
    select, input {
      width: 100%;
      padding: 12px 15px;
      border: 2px solid #e1e5ee;
      border-radius: 8px;
      font-size: 16px;
      transition: var(--transition);
    }
    
    select:focus, input:focus {
      border-color: var(--primary-color);
      outline: none;
      box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
    }
    
    .btn {
      padding: 12px 30px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    
    .btn-primary {
      background-color: var(--primary-color);
      color: white;
    }
    
    .btn-primary:hover {
      background-color: var(--secondary-color);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }
    
    .btn-secondary {
      background-color: #e9ecef;
      color: var(--dark-color);
    }
    
    .btn-secondary:hover {
      background-color: #dee2e6;
      transform: translateY(-2px);
    }
    
    .btn-danger {
      background-color: var(--danger-color);
      color: white;
    }
    
    .btn-danger:hover {
      background-color: #c82333;
      transform: translateY(-2px);
    }
    
    .test-area {
      display: none;
      animation: fadeIn 0.5s ease;
    }
    
    .timer-container {
      background: linear-gradient(to right, #ff6b6b, #ff8e53);
      color: white;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 25px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 4px 12px rgba(255, 107, 107, 0.3);
      animation: pulse 2s infinite;
    }
    
    .timer {
      font-size: 28px;
      font-weight: 700;
      font-family: 'Courier New', monospace;
    }
    
    .question-counter {
      font-size: 16px;
      background: rgba(255, 255, 255, 0.2);
      padding: 5px 15px;
      border-radius: 20px;
    }
    
    .question-box {
      border: 2px solid #e1e5ee;
      border-radius: 10px;
      padding: 25px;
      margin-bottom: 25px;
      background-color: white;
      transition: var(--transition);
      animation: slideIn 0.5s ease;
    }
    
    .question-box:hover {
      border-color: var(--accent-color);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
    }
    
    .question-text {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 20px;
      line-height: 1.5;
    }
    
    .options-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
    }
    
    .option {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      border: 2px solid #e1e5ee;
      border-radius: 8px;
      cursor: pointer;
      transition: var(--transition);
      text-align: center;
      position: relative;
    }
    
    .option:hover {
      border-color: var(--accent-color);
      background-color: rgba(76, 201, 240, 0.05);
      transform: translateY(-2px);
    }
    
    .option.selected {
      border-color: var(--primary-color);
      background-color: rgba(67, 97, 238, 0.1);
      box-shadow: 0 4px 8px rgba(67, 97, 238, 0.2);
    }
    
    .option-label {
      font-size: 16px;
      font-weight: 500;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
    }
    
    .option-letter {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 30px;
      height: 30px;
      background-color: #e9ecef;
      border-radius: 50%;
      font-weight: bold;
      color: var(--dark-color);
      transition: var(--transition);
    }
    
    .option.selected .option-letter {
      background-color: var(--primary-color);
      color: white;
    }
    
    .option-text {
      line-height: 1.4;
    }
    
    /* Hide the actual radio buttons */
    .option input {
      position: absolute;
      opacity: 0;
      pointer-events: none;
    }
    
    .navigation {
      display: flex;
      justify-content: space-between;
      margin-top: 25px;
    }
    
    .progress-container {
      margin: 30px 0;
    }
    
    .progress-bar {
      height: 8px;
      background-color: #e9ecef;
      border-radius: 4px;
      overflow: hidden;
    }
    
    .progress {
      height: 100%;
      background: linear-gradient(to right, var(--primary-color), var(--accent-color));
      width: 0%;
      transition: width 0.5s ease;
    }
    
    .result-screen {
      display: none;
      text-align: center;
      padding: 40px 20px;
      animation: fadeIn 0.8s ease;
    }
    
    .result-screen h2 {
      color: var(--secondary-color);
      margin-bottom: 20px;
    }
    
    .score-display {
      font-size: 72px;
      font-weight: 700;
      color: var(--primary-color);
      margin: 20px 0;
      animation: bounce 1s ease;
    }
    
    .result-details {
      max-width: 500px;
      margin: 0 auto 30px;
      text-align: left;
      background-color: #f8f9fa;
      padding: 20px;
      border-radius: 10px;
    }
    
    .result-details p {
      margin-bottom: 10px;
      display: flex;
      justify-content: space-between;
    }
    
    .confetti {
      position: fixed;
      width: 10px;
      height: 10px;
      background-color: var(--accent-color);
      opacity: 0;
    }
    
    /* Animations */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    @keyframes slideUp {
      from { transform: translateY(20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    
    @keyframes slideIn {
      from { transform: translateX(-20px); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    
    @keyframes pulse {
      0% { box-shadow: 0 4px 12px rgba(255, 107, 107, 0.3); }
      50% { box-shadow: 0 4px 20px rgba(255, 107, 107, 0.5); }
      100% { box-shadow: 0 4px 12px rgba(255, 107, 107, 0.3); }
    }
    
    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-20px); }
      60% { transform: translateY(-10px); }
    }
    
    /* Responsive Design */
    @media (max-width: 768px) {
      .container {
        margin: 10px;
        border-radius: 8px;
      }
      
      .content {
        padding: 20px;
      }
      
      .timer-container {
        flex-direction: column;
        gap: 10px;
        text-align: center;
      }
      
      .options-grid {
        grid-template-columns: 1fr;
      }
      
      .navigation {
        flex-direction: column;
        gap: 10px;
      }
      
      .btn {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>English Proficiency Test</h1>
      <p>Computer-Based Testing Platform</p>
    </header>
    
    <div class="content">
      <!-- Welcome Screen -->
      <div id="welcomeScreen" class="welcome-screen">
        <h2>Welcome to the English Proficiency Test</h2>
        <p>This test evaluates your English language skills across multiple domains including grammar, vocabulary, and reading comprehension. Please complete the test within the allocated time.</p>
        
        <div class="form-group">
          <label for="studentName">Your Name</label>
          <input type="text" id="studentName" placeholder="Enter your full name">
        </div>
        
        <div class="form-group">
          <label for="timeSelect">Select Test Duration</label>
          <select id="timeSelect">
            <option value="30">30 minutes (75 questions)</option>
            <option value="60">60 minutes (150 questions)</option>
          </select>
        </div>
        
        <button id="startBtn" class="btn btn-primary">
          <span>Start Test</span>
        </button>
      </div>
      
      <!-- Test Area -->
      <div id="testArea" class="test-area">
        <div class="timer-container">
          <div class="timer" id="timer">60:00</div>
          <div class="question-counter" id="questionCounter">Question 1 of 150</div>
        </div>
        
        <div class="progress-container">
          <div class="progress-bar">
            <div class="progress" id="progressBar"></div>
          </div>
        </div>
        
        <div id="questionBox" class="question-box">
          <div class="question-text" id="questionText"></div>
          <div class="options-grid" id="optionsContainer"></div>
        </div>
        
        <div class="navigation">
          <button id="prevBtn" class="btn btn-secondary">
            <span>Previous</span>
          </button>
          <button id="nextBtn" class="btn btn-primary">
            <span>Next</span>
          </button>
          <button id="submitBtn" class="btn btn-danger">
            <span>Submit Test</span>
          </button>
        </div>
      </div>
      
      <!-- Result Screen -->
      <div id="resultScreen" class="result-screen">
        <h2>Test Completed!</h2>
        <div class="score-display" id="scoreDisplay">0%</div>
        <div class="result-details">
          <p><span>Name:</span> <span id="resultName"></span></p>
          <p><span>Total Questions:</span> <span id="totalQuestions"></span></p>
          <p><span>Correct Answers:</span> <span id="correctAnswers"></span></p>
          <p><span>Time Taken:</span> <span id="timeTaken"></span></p>
        </div>
        <button id="restartBtn" class="btn btn-primary">
          <span>Take Test Again</span>
        </button>
      </div>
    </div>
  </div>

  <script>
    // Generate 150 questions for the test
    function generateQuestions(count) {
      const questions = [];
      const grammarQuestions = [
        {
          question: "Which sentence is grammatically correct?",
          options: [
            "She don't like apples.",
            "She doesn't like apples.",
            "She doesn't likes apples.",
            "She don't likes apples."
          ],
          correct: 1
        },
        {
          question: "Choose the correct word to complete the sentence: I'm looking forward _____ seeing you.",
          options: [
            "to",
            "for",
            "at",
            "with"
          ],
          correct: 0
        },
        {
          question: "Identify the correct passive form: They built this house in 1990.",
          options: [
            "This house was built in 1990.",
            "This house is built in 1990.",
            "This house built in 1990.",
            "This house has built in 1990."
          ],
          correct: 0
        },
        {
          question: "Select the correct sentence:",
          options: [
            "Neither of the boys are coming.",
            "Neither of the boys is coming.",
            "Neither of the boys were coming.",
            "Neither of the boys have come."
          ],
          correct: 1
        },
        {
          question: "Choose the correct preposition: I'm good _____ mathematics.",
          options: [
            "at",
            "in",
            "on",
            "with"
          ],
          correct: 0
        },
        {
          question: "Which sentence uses the correct verb tense?",
          options: [
            "I have seen that movie yesterday.",
            "I saw that movie yesterday.",
            "I see that movie yesterday.",
            "I had seen that movie yesterday."
          ],
          correct: 1
        }
      ];
      
      const vocabularyQuestions = [
        {
          question: "What is the synonym of 'benevolent'?",
          options: [
            "Malevolent",
            "Kind",
            "Stingy",
            "Hostile"
          ],
          correct: 1
        },
        {
          question: "What is the meaning of 'ephemeral'?",
          options: [
            "Eternal",
            "Temporary",
            "Important",
            "Beautiful"
          ],
          correct: 1
        },
        {
          question: "What is the antonym of 'diligent'?",
          options: [
            "Hardworking",
            "Lazy",
            "Careful",
            "Intelligent"
          ],
          correct: 1
        },
        {
          question: "What does 'ubiquitous' mean?",
          options: [
            "Rare",
            "Everywhere",
            "Expensive",
            "Ancient"
          ],
          correct: 1
        },
        {
          question: "Which word means 'to make worse'?",
          options: [
            "Ameliorate",
            "Aggravate",
            "Alleviate",
            "Appreciate"
          ],
          correct: 1
        }
      ];
      
      const spellingQuestions = [
        {
          question: "Which word is spelled correctly?",
          options: [
            "Accomodate",
            "Acommodate",
            "Accommodate",
            "Acomodate"
          ],
          correct: 2
        },
        {
          question: "Select the correctly spelled word:",
          options: [
            "Embarrass",
            "Embarass",
            "Embarras",
            "Embaras"
          ],
          correct: 0
        },
        {
          question: "Which spelling is correct?",
          options: [
            "Maintenance",
            "Maintainance",
            "Maintanance",
            "Maintenence"
          ],
          correct: 0
        }
      ];
      
      const readingQuestions = [
        {
          question: "Based on the passage, what was the author's main purpose?",
          options: [
            "To entertain",
            "To inform",
            "To persuade",
            "To describe"
          ],
          correct: 1
        },
        {
          question: "What can be inferred from the text?",
          options: [
            "The character was unhappy",
            "The setting was in winter",
            "The problem was resolved",
            "The theme was about friendship"
          ],
          correct: 2
        }
      ];
      
      // Combine all question types
      const allQuestions = [
        ...grammarQuestions,
        ...vocabularyQuestions,
        ...spellingQuestions,
        ...readingQuestions
      ];
      
      // Generate enough questions to reach the count
      for (let i = 0; i < count; i++) {
        const original = allQuestions[i % allQuestions.length];
        questions.push({
          question: `Question ${i+1}: ${original.question}`,
          options: [...original.options],
          correct: original.correct
        });
      }
      
      return questions;
    }

    // DOM elements
    const welcomeScreen = document.getElementById('welcomeScreen');
    const testArea = document.getElementById('testArea');
    const resultScreen = document.getElementById('resultScreen');
    const startBtn = document.getElementById('startBtn');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const submitBtn = document.getElementById('submitBtn');
    const restartBtn = document.getElementById('restartBtn');
    const timerElement = document.getElementById('timer');
    const questionCounter = document.getElementById('questionCounter');
    const questionText = document.getElementById('questionText');
    const optionsContainer = document.getElementById('optionsContainer');
    const progressBar = document.getElementById('progressBar');
    const scoreDisplay = document.getElementById('scoreDisplay');
    const resultName = document.getElementById('resultName');
    const totalQuestions = document.getElementById('totalQuestions');
    const correctAnswers = document.getElementById('correctAnswers');
    const timeTaken = document.getElementById('timeTaken');
    const studentNameInput = document.getElementById('studentName');
    const timeSelect = document.getElementById('timeSelect');

    // Test state
    let currentQuestion = 0;
    let userAnswers = [];
    let timer;
    let timeLeft;
    let startTime;
    let endTime;
    let questions = [];

    // Start the test
    startBtn.addEventListener('click', startTest);
    
    function startTest() {
      const studentName = studentNameInput.value.trim();
      if (!studentName) {
        alert('Please enter your name');
        return;
      }
      
      // Determine number of questions based on time selection
      const duration = parseInt(timeSelect.value);
      const questionCount = duration === 30 ? 75 : 150;
      
      // Generate questions
      questions = generateQuestions(questionCount);
      userAnswers = new Array(questions.length).fill(null);
      
      // Set test duration
      timeLeft = duration * 60; // Convert to seconds
      
      // Update UI
      welcomeScreen.style.display = 'none';
      testArea.style.display = 'block';
      
      // Update question counter
      questionCounter.textContent = `Question 1 of ${questions.length}`;
      
      // Start timer
      startTimer();
      
      // Display first question
      displayQuestion();
      
      // Record start time
      startTime = new Date();
    }

    // Timer function
    function startTimer() {
      updateTimerDisplay();
      
      timer = setInterval(() => {
        timeLeft--;
        updateTimerDisplay();
        
        if (timeLeft <= 0) {
          clearInterval(timer);
          submitTest();
        }
      }, 1000);
    }
    
    function updateTimerDisplay() {
      const minutes = Math.floor(timeLeft / 60);
      const seconds = timeLeft % 60;
      timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
      
      // Change color when time is running out
      if (timeLeft < 300) { // 5 minutes
        timerElement.style.color = 'var(--danger-color)';
      }
    }

    // Display question
    function displayQuestion() {
      const question = questions[currentQuestion];
      
      // Update question text
      questionText.textContent = question.question;
      
      // Update question counter
      questionCounter.textContent = `Question ${currentQuestion + 1} of ${questions.length}`;
      
      // Update progress bar
      const progress = ((currentQuestion + 1) / questions.length) * 100;
      progressBar.style.width = `${progress}%`;
      
      // Clear options
      optionsContainer.innerHTML = '';
      
      // Create options
      question.options.forEach((option, index) => {
        const optionElement = document.createElement('div');
        optionElement.className = 'option';
        if (userAnswers[currentQuestion] === index) {
          optionElement.classList.add('selected');
        }
        
        optionElement.innerHTML = `
          <input type="radio" name="option" id="option${index}" value="${index}" 
                 ${userAnswers[currentQuestion] === index ? 'checked' : ''}>
          <label class="option-label" for="option${index}">
            <span class="option-letter">${String.fromCharCode(65 + index)}</span>
            <span class="option-text">${option}</span>
          </label>
        `;
        
        optionElement.addEventListener('click', () => selectOption(index));
        optionsContainer.appendChild(optionElement);
      });
      
      // Update navigation buttons
      prevBtn.disabled = currentQuestion === 0;
      nextBtn.disabled = currentQuestion === questions.length - 1;
    }

    // Select an option
    function selectOption(index) {
      userAnswers[currentQuestion] = index;
      
      // Update UI to show selected option
      const options = document.querySelectorAll('.option');
      options.forEach(option => option.classList.remove('selected'));
      options[index].classList.add('selected');
    }

    // Navigation functions
    prevBtn.addEventListener('click', () => {
      if (currentQuestion > 0) {
        currentQuestion--;
        displayQuestion();
      }
    });

    nextBtn.addEventListener('click', () => {
      if (currentQuestion < questions.length - 1) {
        currentQuestion++;
        displayQuestion();
      }
    });

    // Submit test
    submitBtn.addEventListener('click', () => {
      if (confirm('Are you sure you want to submit your test?')) {
        submitTest();
      }
    });

    function submitTest() {
      clearInterval(timer);
      endTime = new Date();
      
      // Calculate score
      let correctCount = 0;
      userAnswers.forEach((answer, index) => {
        if (answer === questions[index].correct) {
          correctCount++;
        }
      });
      
      const score = (correctCount / questions.length) * 100;
      
      // Calculate time taken
      const timeDiff = (endTime - startTime) / 1000; // in seconds
      const minutesTaken = Math.floor(timeDiff / 60);
      const secondsTaken = Math.floor(timeDiff % 60);
      
      // Display results
      testArea.style.display = 'none';
      resultScreen.style.display = 'block';
      
      resultName.textContent = studentNameInput.value;
      totalQuestions.textContent = questions.length;
      correctAnswers.textContent = correctCount;
      timeTaken.textContent = `${minutesTaken}m ${secondsTaken}s`;
      
      // Animate score display
      let displayedScore = 0;
      const scoreInterval = setInterval(() => {
        displayedScore++;
        scoreDisplay.textContent = `${displayedScore}%`;
        
        if (displayedScore >= Math.round(score)) {
          clearInterval(scoreInterval);
          if (score >= 70) {
            createConfetti();
          }
        }
      }, 30);
    }

    // Restart test
    restartBtn.addEventListener('click', () => {
      // Reset test state
      currentQuestion = 0;
      userAnswers = [];
      
      // Show welcome screen
      resultScreen.style.display = 'none';
      welcomeScreen.style.display = 'block';
      
      // Reset form
      studentNameInput.value = '';
      timeSelect.value = '60';
    });

    // Confetti effect
    function createConfetti() {
      const colors = ['#4361ee', '#3a0ca3', '#4cc9f0', '#7209b7', '#f72585'];
      
      for (let i = 0; i < 100; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.left = `${Math.random() * 100}vw`;
        confetti.style.top = '-10px';
        confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
        document.body.appendChild(confetti);
        
        // Animate confetti
        const animation = confetti.animate([
          { top: '-10px', opacity: 1, transform: `rotate(0deg)` },
          { top: `${Math.random() * 100 + 50}vh`, opacity: 1, transform: `rotate(${Math.random() * 720}deg)` },
          { top: '100vh', opacity: 0 }
        ], {
          duration: Math.random() * 3000 + 2000,
          easing: 'cubic-bezier(0.1, 0.8, 0.2, 1)'
        });
        
        // Remove confetti after animation
        animation.onfinish = () => confetti.remove();
      }
    }
  </script>
</body>
</html>